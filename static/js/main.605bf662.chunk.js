(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{33:function(e,t,n){e.exports=n.p+"static/media/91.dcbd441c.svg"},34:function(e,t,n){e.exports=n.p+"static/media/background.a9a75cdd.jpg"},37:function(e,t,n){e.exports=n(64)},63:function(e,t,n){},64:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(22),o=n.n(c);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var i=n(16),s=n(3),l=n(13),u=n(30),d=n.n(u),p=Object(i.b)({restaurants:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_RESTAURANTS":return t.restaurants.map(function(e){return{name:e,id:d.a.generate()}});default:return e}},location:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_LOCATION":return t.location;default:return e}},card:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CARD":return t.card;default:return e}},loading:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"IS_LOADING":return t.boolean;default:return e}}}),m=n(2),f=n.n(m),h=n(14),v=n(35),g=n(7),E=n(8),b=n(10),O=n(9),y=n(11),j=n(15),w=function(e){return{type:"SET_RESTAURANTS",restaurants:e}},k=function(e){return{type:"IS_LOADING",boolean:e}},C=n(20),N=n.n(C),S=function(e){function t(){var e;return Object(g.a)(this,t),(e=Object(b.a)(this,Object(O.a)(t).call(this))).handleEnter=function(t){if("Enter"!==t.key)return null;e.state.value&&e.getLocation()},e.handleChange=function(t){var n=t.target.value;e.setState({value:n})},e.getLocation=Object(h.a)(f.a.mark(function t(){var n,a;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.props.isLoading(!0),N.a.setApiKey("AIzaSyCFT88R5djF3OSN8FkE3af-QEkpj-tgMWo"),n=e.state.value,t.prev=3,t.next=6,N.a.fromAddress(n);case 6:a=t.sent,e.gatherLocationInfo(a.results[0]),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),console.log(t.t0.message);case 13:case"end":return t.stop()}},t,null,[[3,10]])})),e.gatherLocationInfo=function(t){var n={name:t.formatted_address,coords:t.geometry.location};e.props.setLocation(n),e.setState({redirect:!0})},e.handleClick=function(){if(!navigator.geolocation)return"geolocation is not enabled/supported in this browser";e.props.isLoading(!0),navigator.geolocation.getCurrentPosition(function(t){e.getAddress(t.coords)})},e.getAddress=function(){var t=Object(h.a)(f.a.mark(function t(n){var a;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return N.a.setApiKey("AIzaSyCFT88R5djF3OSN8FkE3af-QEkpj-tgMWo"),t.prev=1,t.next=4,N.a.fromLatLng(n.latitude,n.longitude);case 4:return a=t.sent,e.gatherLocationInfo(a.results[0]),t.abrupt("return",a.results[0]);case 9:return t.prev=9,t.t0=t.catch(1),t.abrupt("return",t.t0.message);case 12:case"end":return t.stop()}},t,null,[[1,9]])}));return function(e){return t.apply(this,arguments)}}(),e.state={value:"",redirect:!1},e}return Object(y.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleEnter)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleEnter)}},{key:"render",value:function(){var e=this.state.value;return this.state.redirect?r.a.createElement(j.a,{to:"/locations"}):r.a.createElement("div",{className:"Form"},r.a.createElement("h1",null,"Rotten Potatoes"),r.a.createElement("label",{htmlFor:"address"},"Enter an address:"),r.a.createElement("input",{value:e,onChange:this.handleChange,id:"address",type:"text",placeholder:"ex. 123 Fake Address, Denver, CO"}),r.a.createElement("h3",null,"OR"),r.a.createElement(l.c,{to:"/locations",onClick:this.handleClick},"Find My Location"))}}]),t}(a.Component),A=Object(s.b)(function(e){return{loading:e.loading}},function(e){return{setRestaurants:function(t){return e(w(t))},setLocation:function(t){return e(function(e){return{type:"SET_LOCATION",location:e}}(t))},isLoading:function(t){return e(k(t))}}})(S),L=n(36),R=n(32),D=n.n(R),T=function(e){function t(){var e,n;Object(g.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(b.a)(this,(e=Object(O.a)(t)).call.apply(e,[this].concat(r)))).buildTitle=function(e){return e.toLowerCase().split(" ").map(function(e){return e.charAt(0).toUpperCase()+e.slice(1)}).join(" ")},n.buildAddress=function(e){var t=e.toLowerCase().split(" "),n=(t=t.map(function(e){return e.charAt(0).toUpperCase()+e.slice(1)}).reverse())[1].toUpperCase();return t.splice(1,1,n),t.reverse().join(" ")},n.buildDistance=function(e){var t=e.toString().split("."),n=t[1].slice(0,1);return t[0]+"."+n+"m away"},n.handleClick=function(){n.props.setCard(n.props)},n}return Object(y.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this.props,t=e.name,n=e.address,a=e.distance,c=e.id,o=this.props.correctPlaces[0],i=o.inspectionscore,s=o.violationtype,u=this.buildTitle(t),d=this.buildAddress(n),p=this.buildDistance(a);return r.a.createElement("div",{className:"Card"},r.a.createElement("div",{className:"card-text"},r.a.createElement(l.b,{to:"/locations/".concat(c),onClick:this.handleClick},u),r.a.createElement("p",null,d),r.a.createElement("p",null,p)),r.a.createElement("div",{className:"card-percentage"},r.a.createElement("p",null,"inspection score:"),r.a.createElement("p",null,i+"%"),r.a.createElement("p",null,s)),r.a.createElement("div",{className:"card-favorite"},"+"))}}]),t}(a.Component),_=Object(s.b)(null,function(e){return{setCard:function(t){return e(function(e){return{type:"SET_CARD",card:e}}(t))}}})(T),x=Object(s.b)(function(e){return{location:e.location}},null)(function(e){return r.a.createElement("div",{className:"Header"},r.a.createElement("div",{className:"title"},r.a.createElement("h1",null,"Rotten Potatoes")),r.a.createElement("div",{className:"nav"},r.a.createElement("p",null,"Showing Results for:"),r.a.createElement("p",null,e.location&&e.location.name),r.a.createElement(l.c,{to:"/"},"change location..")))}),I=function(){var e=Object(h.a)(f.a.mark(function e(t){var n,a;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return n=e.sent,e.next=5,n.json();case 5:if(a=e.sent,n.ok){e.next=10;break}throw new Error(a);case 10:return e.abrupt("return",a);case 11:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),F=n(33),U=n.n(F),P=function(e){function t(){var e;return Object(g.a)(this,t),(e=Object(b.a)(this,Object(O.a)(t).call(this))).fetchRestaurants=Object(h.a)(f.a.mark(function t(){var n;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return"https://data.colorado.gov/resource/d5e8-gubm.json",t.next=3,I("https://data.colorado.gov/resource/d5e8-gubm.json");case 3:n=t.sent,e.gatherRestaurantData(n);case 5:case"end":return t.stop()}},t)})),e.gatherRestaurantData=function(t){var n=e.props.restaurants.map(function(e){var n=t.filter(function(t){return t.facilityname===e.name}),a=n[0],r=a.location_address,c=a.city,o=a.state,i=a.zip,s=a.location;return{name:e.name,id:e.id,address:"".concat(r,". ").concat(c,", ").concat(o,", ").concat(i),coordinates:s&&s.coordinates,correctPlaces:n}});e.findDistances(n)},e.sortByDistance=function(t){t.sort(function(e,t){return e&&t?e.distance-t.distance:null}),t=t.filter(function(e){return null!==e}),e.setState({cards:t}),e.props.isLoading(!1)},e.state={cards:[]},e}return Object(y.a)(t,e),Object(E.a)(t,[{key:"findDistances",value:function(e){var t=this.props.location,n={latitude:t.coords.lat,longitude:t.coords.lng},a=e.map(function(e){if(!e.coordinates)return null;var t={latitude:e.coordinates[1],longitude:e.coordinates[0]},a=D()(n,t,{unit:"mile"});return Object(L.a)({},e,{distance:a})});this.sortByDistance(a)}},{key:"render",value:function(){var e=this.props,t=e.loading,n=e.location,a=e.restaurants,c=this.state.cards;return n.coords&&!c.length&&this.fetchRestaurants(a),t?r.a.createElement("div",{className:"CardContainer"},r.a.createElement(x,null),r.a.createElement("img",{alt:"loader gif",src:U.a,className:"loader"})):r.a.createElement("div",{className:"CardContainer"},r.a.createElement(x,null),r.a.createElement("div",{className:"card-grid"},c.map(function(e){return r.a.createElement(_,Object.assign({key:e.id},e))})))}}]),t}(a.Component),M=Object(s.b)(function(e){return{location:e.location,restaurants:e.restaurants,loading:e.loading}},function(e){return{isLoading:function(t){return e(k(t))}}})(P),W=function(e){function t(){var e,n;Object(g.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(b.a)(this,(e=Object(O.a)(t)).call.apply(e,[this].concat(r)))).buildDistance=function(e){var t=e.toString().split("."),n=t[1].slice(0,1);return t[0]+"."+n+"m away"},n}return Object(y.a)(t,e),Object(E.a)(t,[{key:"buildDate",value:function(e){return e.split("T")[0]}},{key:"render",value:function(){var e=this.props,t=e.name,n=e.address,a=e.correctPlaces,c=e.distance,o=a[0],i=o.inspectiontype,s=o.violation,l=o.violationtype,u=o.inspectionscore,d=o.inspectiondate,p=this.buildDate(d),m=this.buildDistance(c);return r.a.createElement("div",{className:"Info"},r.a.createElement("h1",null,t),r.a.createElement("p",null,m),r.a.createElement("p",null,n),r.a.createElement("div",{className:"inspection-info"},r.a.createElement("h3",null,"Latest Inspection:"),r.a.createElement("p",null,"Date: ",p),r.a.createElement("p",null,"Inspection Type: ",i),r.a.createElement("p",null,"Inspection Violation: ",s),r.a.createElement("p",null,"Violation Status: ",l),r.a.createElement("p",null,"Inspection Score: ",u)))}}]),t}(a.Component),B=n(34),V=n.n(B),X=function(e){function t(){var e,n;Object(g.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(b.a)(this,(e=Object(O.a)(t)).call.apply(e,[this].concat(r)))).gatherRestaurantNames=function(e){var t=e.map(function(e){return e.facilityname}),a=Object(v.a)(new Set(t));n.props.setRestaurants(a)},n}return Object(y.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){this.fetchRestaurants()}},{key:"fetchRestaurants",value:function(){var e=Object(h.a)(f.a.mark(function e(){var t;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"https://data.colorado.gov/resource/d5e8-gubm.json",e.next=3,I("https://data.colorado.gov/resource/d5e8-gubm.json");case 3:t=e.sent,this.gatherRestaurantNames(t);case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t={backgroundImage:"url("+V.a+")"};return r.a.createElement("div",{className:"App"},r.a.createElement("div",{style:t,className:"background-image"}),r.a.createElement("div",{className:"app-frame"}),r.a.createElement("div",{className:"App-content"},r.a.createElement(j.b,{exact:!0,path:"/",component:A}),r.a.createElement(j.b,{exact:!0,path:"/locations",component:M}),r.a.createElement(j.b,{path:"/locations/:id",render:function(t){t.match;return r.a.createElement(W,e.props.card)}})))}}]),t}(a.Component),z=Object(s.b)(function(e){return{card:e.card}},function(e){return{setRestaurants:function(t){return e(w(t))}}})(X),G=(n(63),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),J=Object(i.c)(p,G);o.a.render(r.a.createElement(s.a,{store:J},r.a.createElement(l.a,null,r.a.createElement(z,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[37,1,2]]]);
//# sourceMappingURL=main.605bf662.chunk.js.map